import{c as Dt,j as u,R as Je,C as Qe,b as T,d as jt,X as zt,T as Rt,D as Ft,P as Xe,O as Ze,r as f,e as qe,f as kt,g as It,h as Nt,i as te,k as et,l as H,m as fe,A as tt,n as rt,o as Ot,p as Kt,q as $t,s as Tt,t as Lt,F as Vt,v as Gt,w as Ht,x as Wt,y as ge,S as Yt,z as Ut,L as Jt,B as Qt,E as Xt,G as Zt,H as qt,J as er,K as tr,M as rr,u as sr,N as _e,Q as he,U as nr,V as or,W as ar,Y as ir,Z as cr,_ as ur}from"./index-UBuPwczO.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"M5 12h14",key:"1ays0h"}]],dr=Dt("minus",lr);function hr({...t}){return u.jsx(Je,{"data-slot":"dialog",...t})}function fr({...t}){return u.jsx(Xe,{"data-slot":"dialog-portal",...t})}function gr({className:t,...e}){return u.jsx(Ze,{"data-slot":"dialog-overlay",className:T("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function pr({className:t,children:e,showCloseButton:r=!0,...n}){return u.jsxs(fr,{"data-slot":"dialog-portal",children:[u.jsx(gr,{}),u.jsxs(Qe,{"data-slot":"dialog-content",className:T("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[e,r&&u.jsxs(jt,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[u.jsx(zt,{}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function mr({className:t,...e}){return u.jsx("div",{"data-slot":"dialog-header",className:T("flex flex-col gap-2 text-center sm:text-left",t),...e})}function vr({className:t,...e}){return u.jsx(Rt,{"data-slot":"dialog-title",className:T("text-lg leading-none font-semibold",t),...e})}function xr({className:t,...e}){return u.jsx(Ft,{"data-slot":"dialog-description",className:T("text-muted-foreground text-sm",t),...e})}var Ce="Popover",[st,en]=Nt(Ce,[qe]),pe=qe(),[br,Q]=st(Ce),nt=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!1}=t,i=pe(e),d=f.useRef(null),[c,l]=f.useState(!1),[g,p]=kt({prop:n,defaultProp:s??!1,onChange:o,caller:Ce});return u.jsx(It,{...i,children:u.jsx(br,{scope:e,contentId:te(),triggerRef:d,open:g,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(v=>!v),[p]),hasCustomAnchor:c,onCustomAnchorAdd:f.useCallback(()=>l(!0),[]),onCustomAnchorRemove:f.useCallback(()=>l(!1),[]),modal:a,children:r})})};nt.displayName=Ce;var ot="PopoverAnchor",yr=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Q(ot,r),o=pe(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:i}=s;return f.useEffect(()=>(a(),()=>i()),[a,i]),u.jsx(tt,{...o,...n,ref:e})});yr.displayName=ot;var at="PopoverTrigger",it=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Q(at,r),o=pe(r),a=et(e,s.triggerRef),i=u.jsx(H.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ht(s.open),...n,ref:a,onClick:fe(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?i:u.jsx(tt,{asChild:!0,...o,children:i})});it.displayName=at;var Ne="PopoverPortal",[Ar,Cr]=st(Ne,{forceMount:void 0}),ct=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,o=Q(Ne,e);return u.jsx(Ar,{scope:e,forceMount:r,children:u.jsx(rt,{present:r||o.open,children:u.jsx(Ot,{asChild:!0,container:s,children:n})})})};ct.displayName=Ne;var ae="PopoverContent",ut=f.forwardRef((t,e)=>{const r=Cr(ae,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,o=Q(ae,t.__scopePopover);return u.jsx(rt,{present:n||o.open,children:o.modal?u.jsx(_r,{...s,ref:e}):u.jsx(wr,{...s,ref:e})})});ut.displayName=ae;var Er=Tt("PopoverContent.RemoveScroll"),_r=f.forwardRef((t,e)=>{const r=Q(ae,t.__scopePopover),n=f.useRef(null),s=et(e,n),o=f.useRef(!1);return f.useEffect(()=>{const a=n.current;if(a)return Kt(a)},[]),u.jsx($t,{as:Er,allowPinchZoom:!0,children:u.jsx(lt,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(t.onCloseAutoFocus,a=>{var i;a.preventDefault(),o.current||(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:fe(t.onPointerDownOutside,a=>{const i=a.detail.originalEvent,d=i.button===0&&i.ctrlKey===!0,c=i.button===2||d;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:fe(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),wr=f.forwardRef((t,e)=>{const r=Q(ae,t.__scopePopover),n=f.useRef(!1),s=f.useRef(!1);return u.jsx(lt,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,i;(a=t.onCloseAutoFocus)==null||a.call(t,o),o.defaultPrevented||(n.current||(i=r.triggerRef.current)==null||i.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var d,c;(d=t.onInteractOutside)==null||d.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((c=r.triggerRef.current)==null?void 0:c.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),lt=f.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:l,...g}=t,p=Q(ae,r),v=pe(r);return Lt(),u.jsx(Vt,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:u.jsx(Gt,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:l,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:u.jsx(Ht,{"data-state":ht(p.open),role:"dialog",id:p.contentId,...v,...g,ref:e,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),dt="PopoverClose",Mr=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Q(dt,r);return u.jsx(H.button,{type:"button",...n,ref:e,onClick:fe(t.onClick,()=>s.onOpenChange(!1))})});Mr.displayName=dt;var Pr="PopoverArrow",Br=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=pe(r);return u.jsx(Wt,{...s,...n,ref:e})});Br.displayName=Pr;function ht(t){return t?"open":"closed"}var Sr=nt,Dr=it,jr=ct,zr=ut;function Rr({...t}){return u.jsx(Sr,{"data-slot":"popover",...t})}function Fr({...t}){return u.jsx(Dr,{"data-slot":"popover-trigger",...t})}function kr({className:t,align:e="center",sideOffset:r=4,...n}){return u.jsx(jr,{children:u.jsx(zr,{"data-slot":"popover-content",align:e,sideOffset:r,className:T("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}var $e=1,Ir=.9,Nr=.8,Or=.17,we=.1,Me=.999,Kr=.9999,$r=.99,Tr=/[\\\/_+.#"@\[\(\{&]/,Lr=/[\\\/_+.#"@\[\(\{&]/g,Vr=/[\s-]/,ft=/[\s-]/g;function Se(t,e,r,n,s,o,a){if(o===e.length)return s===t.length?$e:$r;var i=`${s},${o}`;if(a[i]!==void 0)return a[i];for(var d=n.charAt(o),c=r.indexOf(d,s),l=0,g,p,v,A;c>=0;)g=Se(t,e,r,n,c+1,o+1,a),g>l&&(c===s?g*=$e:Tr.test(t.charAt(c-1))?(g*=Nr,v=t.slice(s,c-1).match(Lr),v&&s>0&&(g*=Math.pow(Me,v.length))):Vr.test(t.charAt(c-1))?(g*=Ir,A=t.slice(s,c-1).match(ft),A&&s>0&&(g*=Math.pow(Me,A.length))):(g*=Or,s>0&&(g*=Math.pow(Me,c-s))),t.charAt(c)!==e.charAt(o)&&(g*=Kr)),(g<we&&r.charAt(c-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&r.charAt(c-1)!==n.charAt(o))&&(p=Se(t,e,r,n,c+1,o+2,a),p*we>g&&(g=p*we)),g>l&&(l=g),c=r.indexOf(d,c+1);return a[i]=l,l}function Te(t){return t.toLowerCase().replace(ft," ")}function Gr(t,e,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,Se(t,e,Te(t),Te(e),0,0,{})}var de='[cmdk-group=""]',Pe='[cmdk-group-items=""]',Hr='[cmdk-group-heading=""]',gt='[cmdk-item=""]',Le=`${gt}:not([aria-disabled="true"])`,De="cmdk-item-select",ne="data-value",Wr=(t,e,r)=>Gr(t,e,r),pt=f.createContext(void 0),me=()=>f.useContext(pt),mt=f.createContext(void 0),Oe=()=>f.useContext(mt),vt=f.createContext(void 0),xt=f.forwardRef((t,e)=>{let r=oe(()=>{var h,b;return{search:"",value:(b=(h=t.value)!=null?h:t.defaultValue)!=null?b:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=oe(()=>new Set),s=oe(()=>new Map),o=oe(()=>new Map),a=oe(()=>new Set),i=bt(t),{label:d,children:c,value:l,onValueChange:g,filter:p,shouldFilter:v,loop:A,disablePointerSelection:D=!1,vimBindings:B=!0,...R}=t,F=te(),$=te(),k=te(),O=f.useRef(null),w=ss();re(()=>{if(l!==void 0){let h=l.trim();r.current.value=h,E.emit()}},[l]),re(()=>{w(6,Z)},[]);let E=f.useMemo(()=>({subscribe:h=>(a.current.add(h),()=>a.current.delete(h)),snapshot:()=>r.current,setState:(h,b,y)=>{var m,_,P,z;if(!Object.is(r.current[h],b)){if(r.current[h]=b,h==="search")K(),L(),w(1,V);else if(h==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let j=document.getElementById(k);j?j.focus():(m=document.getElementById(F))==null||m.focus()}if(w(7,()=>{var j;r.current.selectedItemId=(j=S())==null?void 0:j.id,E.emit()}),y||w(5,Z),((_=i.current)==null?void 0:_.value)!==void 0){let j=b??"";(z=(P=i.current).onValueChange)==null||z.call(P,j);return}}E.emit()}},emit:()=>{a.current.forEach(h=>h())}}),[]),C=f.useMemo(()=>({value:(h,b,y)=>{var m;b!==((m=o.current.get(h))==null?void 0:m.value)&&(o.current.set(h,{value:b,keywords:y}),r.current.filtered.items.set(h,M(b,y)),w(2,()=>{L(),E.emit()}))},item:(h,b)=>(n.current.add(h),b&&(s.current.has(b)?s.current.get(b).add(h):s.current.set(b,new Set([h]))),w(3,()=>{K(),L(),r.current.value||V(),E.emit()}),()=>{o.current.delete(h),n.current.delete(h),r.current.filtered.items.delete(h);let y=S();w(4,()=>{K(),(y==null?void 0:y.getAttribute("id"))===h&&V(),E.emit()})}),group:h=>(s.current.has(h)||s.current.set(h,new Set),()=>{o.current.delete(h),s.current.delete(h)}),filter:()=>i.current.shouldFilter,label:d||t["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:F,inputId:k,labelId:$,listInnerRef:O}),[]);function M(h,b){var y,m;let _=(m=(y=i.current)==null?void 0:y.filter)!=null?m:Wr;return h?_(h,r.current.search,b):0}function L(){if(!r.current.search||i.current.shouldFilter===!1)return;let h=r.current.filtered.items,b=[];r.current.filtered.groups.forEach(m=>{let _=s.current.get(m),P=0;_.forEach(z=>{let j=h.get(z);P=Math.max(j,P)}),b.push([m,P])});let y=O.current;I().sort((m,_)=>{var P,z;let j=m.getAttribute("id"),q=_.getAttribute("id");return((P=h.get(q))!=null?P:0)-((z=h.get(j))!=null?z:0)}).forEach(m=>{let _=m.closest(Pe);_?_.appendChild(m.parentElement===_?m:m.closest(`${Pe} > *`)):y.appendChild(m.parentElement===y?m:m.closest(`${Pe} > *`))}),b.sort((m,_)=>_[1]-m[1]).forEach(m=>{var _;let P=(_=O.current)==null?void 0:_.querySelector(`${de}[${ne}="${encodeURIComponent(m[0])}"]`);P==null||P.parentElement.appendChild(P)})}function V(){let h=I().find(y=>y.getAttribute("aria-disabled")!=="true"),b=h==null?void 0:h.getAttribute(ne);E.setState("value",b||void 0)}function K(){var h,b,y,m;if(!r.current.search||i.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let _=0;for(let P of n.current){let z=(b=(h=o.current.get(P))==null?void 0:h.value)!=null?b:"",j=(m=(y=o.current.get(P))==null?void 0:y.keywords)!=null?m:[],q=M(z,j);r.current.filtered.items.set(P,q),q>0&&_++}for(let[P,z]of s.current)for(let j of z)if(r.current.filtered.items.get(j)>0){r.current.filtered.groups.add(P);break}r.current.filtered.count=_}function Z(){var h,b,y;let m=S();m&&(((h=m.parentElement)==null?void 0:h.firstChild)===m&&((y=(b=m.closest(de))==null?void 0:b.querySelector(Hr))==null||y.scrollIntoView({block:"nearest"})),m.scrollIntoView({block:"nearest"}))}function S(){var h;return(h=O.current)==null?void 0:h.querySelector(`${gt}[aria-selected="true"]`)}function I(){var h;return Array.from(((h=O.current)==null?void 0:h.querySelectorAll(Le))||[])}function W(h){let b=I()[h];b&&E.setState("value",b.getAttribute(ne))}function se(h){var b;let y=S(),m=I(),_=m.findIndex(z=>z===y),P=m[_+h];(b=i.current)!=null&&b.loop&&(P=_+h<0?m[m.length-1]:_+h===m.length?m[0]:m[_+h]),P&&E.setState("value",P.getAttribute(ne))}function ie(h){let b=S(),y=b==null?void 0:b.closest(de),m;for(;y&&!m;)y=h>0?ts(y,de):rs(y,de),m=y==null?void 0:y.querySelector(Le);m?E.setState("value",m.getAttribute(ne)):se(h)}let ce=()=>W(I().length-1),ue=h=>{h.preventDefault(),h.metaKey?ce():h.altKey?ie(1):se(1)},le=h=>{h.preventDefault(),h.metaKey?W(0):h.altKey?ie(-1):se(-1)};return f.createElement(H.div,{ref:e,tabIndex:-1,...R,"cmdk-root":"",onKeyDown:h=>{var b;(b=R.onKeyDown)==null||b.call(R,h);let y=h.nativeEvent.isComposing||h.keyCode===229;if(!(h.defaultPrevented||y))switch(h.key){case"n":case"j":{B&&h.ctrlKey&&ue(h);break}case"ArrowDown":{ue(h);break}case"p":case"k":{B&&h.ctrlKey&&le(h);break}case"ArrowUp":{le(h);break}case"Home":{h.preventDefault(),W(0);break}case"End":{h.preventDefault(),ce();break}case"Enter":{h.preventDefault();let m=S();if(m){let _=new Event(De);m.dispatchEvent(_)}}}}},f.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:os},d),Ee(t,h=>f.createElement(mt.Provider,{value:E},f.createElement(pt.Provider,{value:C},h))))}),Yr=f.forwardRef((t,e)=>{var r,n;let s=te(),o=f.useRef(null),a=f.useContext(vt),i=me(),d=bt(t),c=(n=(r=d.current)==null?void 0:r.forceMount)!=null?n:a==null?void 0:a.forceMount;re(()=>{if(!c)return i.item(s,a==null?void 0:a.id)},[c]);let l=yt(s,o,[t.value,t.children,o],t.keywords),g=Oe(),p=J(w=>w.value&&w.value===l.current),v=J(w=>c||i.filter()===!1?!0:w.search?w.filtered.items.get(s)>0:!0);f.useEffect(()=>{let w=o.current;if(!(!w||t.disabled))return w.addEventListener(De,A),()=>w.removeEventListener(De,A)},[v,t.onSelect,t.disabled]);function A(){var w,E;D(),(E=(w=d.current).onSelect)==null||E.call(w,l.current)}function D(){g.setState("value",l.current,!0)}if(!v)return null;let{disabled:B,value:R,onSelect:F,forceMount:$,keywords:k,...O}=t;return f.createElement(H.div,{ref:ge(o,e),...O,id:s,"cmdk-item":"",role:"option","aria-disabled":!!B,"aria-selected":!!p,"data-disabled":!!B,"data-selected":!!p,onPointerMove:B||i.getDisablePointerSelection()?void 0:D,onClick:B?void 0:A},t.children)}),Ur=f.forwardRef((t,e)=>{let{heading:r,children:n,forceMount:s,...o}=t,a=te(),i=f.useRef(null),d=f.useRef(null),c=te(),l=me(),g=J(v=>s||l.filter()===!1?!0:v.search?v.filtered.groups.has(a):!0);re(()=>l.group(a),[]),yt(a,i,[t.value,t.heading,d]);let p=f.useMemo(()=>({id:a,forceMount:s}),[s]);return f.createElement(H.div,{ref:ge(i,e),...o,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},r&&f.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),Ee(t,v=>f.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},f.createElement(vt.Provider,{value:p},v))))}),Jr=f.forwardRef((t,e)=>{let{alwaysRender:r,...n}=t,s=f.useRef(null),o=J(a=>!a.search);return!r&&!o?null:f.createElement(H.div,{ref:ge(s,e),...n,"cmdk-separator":"",role:"separator"})}),Qr=f.forwardRef((t,e)=>{let{onValueChange:r,...n}=t,s=t.value!=null,o=Oe(),a=J(c=>c.search),i=J(c=>c.selectedItemId),d=me();return f.useEffect(()=>{t.value!=null&&o.setState("search",t.value)},[t.value]),f.createElement(H.input,{ref:e,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":i,id:d.inputId,type:"text",value:s?t.value:a,onChange:c=>{s||o.setState("search",c.target.value),r==null||r(c.target.value)}})}),Xr=f.forwardRef((t,e)=>{let{children:r,label:n="Suggestions",...s}=t,o=f.useRef(null),a=f.useRef(null),i=J(c=>c.selectedItemId),d=me();return f.useEffect(()=>{if(a.current&&o.current){let c=a.current,l=o.current,g,p=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let v=c.offsetHeight;l.style.setProperty("--cmdk-list-height",v.toFixed(1)+"px")})});return p.observe(c),()=>{cancelAnimationFrame(g),p.unobserve(c)}}},[]),f.createElement(H.div,{ref:ge(o,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":n,id:d.listId},Ee(t,c=>f.createElement("div",{ref:ge(a,d.listInnerRef),"cmdk-list-sizer":""},c)))}),Zr=f.forwardRef((t,e)=>{let{open:r,onOpenChange:n,overlayClassName:s,contentClassName:o,container:a,...i}=t;return f.createElement(Je,{open:r,onOpenChange:n},f.createElement(Xe,{container:a},f.createElement(Ze,{"cmdk-overlay":"",className:s}),f.createElement(Qe,{"aria-label":t.label,"cmdk-dialog":"",className:o},f.createElement(xt,{ref:e,...i}))))}),qr=f.forwardRef((t,e)=>J(r=>r.filtered.count===0)?f.createElement(H.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),es=f.forwardRef((t,e)=>{let{progress:r,children:n,label:s="Loading...",...o}=t;return f.createElement(H.div,{ref:e,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Ee(t,a=>f.createElement("div",{"aria-hidden":!0},a)))}),ve=Object.assign(xt,{List:Xr,Item:Yr,Input:Qr,Group:Ur,Separator:Jr,Dialog:Zr,Empty:qr,Loading:es});function ts(t,e){let r=t.nextElementSibling;for(;r;){if(r.matches(e))return r;r=r.nextElementSibling}}function rs(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return r;r=r.previousElementSibling}}function bt(t){let e=f.useRef(t);return re(()=>{e.current=t}),e}var re=typeof window>"u"?f.useEffect:f.useLayoutEffect;function oe(t){let e=f.useRef();return e.current===void 0&&(e.current=t()),e}function J(t){let e=Oe(),r=()=>t(e.snapshot());return f.useSyncExternalStore(e.subscribe,r,r)}function yt(t,e,r,n=[]){let s=f.useRef(),o=me();return re(()=>{var a;let i=(()=>{var c;for(let l of r){if(typeof l=="string")return l.trim();if(typeof l=="object"&&"current"in l)return l.current?(c=l.current.textContent)==null?void 0:c.trim():s.current}})(),d=n.map(c=>c.trim());o.value(t,i,d),(a=e.current)==null||a.setAttribute(ne,i),s.current=i}),s}var ss=()=>{let[t,e]=f.useState(),r=oe(()=>new Map);return re(()=>{r.current.forEach(n=>n()),r.current=new Map},[t]),(n,s)=>{r.current.set(n,s),e({})}};function ns(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function Ee({asChild:t,children:e},r){return t&&f.isValidElement(e)?f.cloneElement(ns(e),{ref:e.ref},r(e.props.children)):r(e)}var os={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function as({className:t,...e}){return u.jsx(ve,{"data-slot":"command",className:T("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...e})}function is({className:t,...e}){return u.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[u.jsx(Yt,{className:"size-4 shrink-0 opacity-50"}),u.jsx(ve.Input,{"data-slot":"command-input",className:T("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...e})]})}function cs({...t}){return u.jsx(ve.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function us({className:t,...e}){return u.jsx(ve.Group,{"data-slot":"command-group",className:T("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...e})}function ls({className:t,...e}){return u.jsx(ve.Item,{"data-slot":"command-item",className:T("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}const ds=[{name:"Mirchi Gold",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Haldi Gold",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Dhaniya Gold",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Mirchi Royal",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Haldi Royal",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Dhaniya Royal",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Mirchi VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]},{size:"20 Rs",order_by:["PKT","Bag"]}]},{name:"Haldi VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]},{size:"20 Rs",order_by:["PKT","Bag"]}]},{name:"Dhaniya VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]},{size:"20 Rs",order_by:["PKT","Bag"]}]},{name:"Jeeravan VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]}]},{name:"Chicken VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]}]},{name:"Mutton VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]}]},{name:"Garam VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]}]},{name:"Achar Masala Gold",sizes:[{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]}]},{name:"Achar Masala Royal",sizes:[{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]}]},{name:"Chana Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Chat Masala",sizes:[{size:"100gm",order_by:["Pcs"]},{size:"500gm",order_by:["Kg"]}]},{name:"Chicken Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"jeeravan Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"kashmiri Mirch",sizes:[{size:"100gm",order_by:["Pcs"]},{size:"500gm",order_by:["Kg"]}]},{name:"Kasuri Methi",sizes:[{size:"100gm",order_by:["Kg","Pcs"]},{size:"25gm",order_by:["Pcs"]}]},{name:"Kitchen King",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Mutton Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Sambhar Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Pav Bhaji Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Dahi Vada Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Sabji Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Shahi Paneer Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Amchoor",sizes:[{size:"100gm",order_by:["Pcs"]}]}],hs=Ut(()=>({availableProducts:ds})),Ve=({label:t,value:e,onChange:r,options:n,placeholder:s,error:o,className:a})=>u.jsxs("div",{className:T("w-full space-y-1",a),children:[u.jsx(Jt,{className:"text-xs font-medium text-muted-foreground",children:t}),u.jsxs(Qt,{value:e,onValueChange:r,children:[u.jsx(Xt,{className:"w-full h-10 text-sm",children:u.jsx(Zt,{placeholder:s||"Select"})}),u.jsx(qt,{children:n.map(i=>u.jsx(er,{value:i,children:i},i))})]}),o&&u.jsx("p",{className:"text-xs text-red-500",children:o})]}),fs=({open:t,setOpen:e})=>{var O,w,E;const r=hs(C=>C.availableProducts),[n,s]=f.useState(!1),o=f.useRef(null),{register:a,control:i,handleSubmit:d,reset:c,formState:{errors:l},watch:g,setValue:p}=tr({resolver:ar(ir),defaultValues:{clientName:"",deliveryDetails:"",products:[]},mode:"onTouched",reValidateMode:"onChange"}),{fields:v,append:A,remove:D,replace:B}=rr({control:i,name:"products"}),R=sr(C=>C.addOrder),F=C=>{R(C),c(),e(!1)},$=C=>{if(!C){if(!window.confirm("You have unsaved changes. Are you sure you want to discard them?"))return;c()}e(C)},k=C=>{A({name:C.name,size:"",order_by:"",quantity:""}),s(!1),setTimeout(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},0)};return u.jsx(hr,{open:t,onOpenChange:$,children:u.jsxs(pr,{className:"max-w-full md:max-w-[700px] max-h-[95vh] overflow-y-auto",children:[u.jsxs(mr,{children:[u.jsx(vr,{children:"Add New Order"}),u.jsx(xr,{children:"Click on the plus icon and select the product to add to the order."})]}),u.jsxs("form",{onSubmit:d(F),children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[u.jsx(_e,{label:"Client Name",placeholder:"Enter client name",...a("clientName"),error:(O=l.clientName)==null?void 0:O.message}),u.jsx(_e,{label:"Delivery Option",placeholder:"Enter delivery details",...a("deliveryDetails"),error:(w=l.deliveryDetails)==null?void 0:w.message})]}),u.jsxs("div",{className:"mt-4 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(Rr,{modal:!0,open:n,onOpenChange:s,children:[u.jsx(Fr,{asChild:!0,children:u.jsxs(he,{variant:"outline",size:"sm",children:[u.jsx(nr,{className:"w-4 h-4 mr-1"}),"Add New Product"]})}),u.jsx(kr,{className:"p-0 w-[300px] max-h-[300px] overflow-hidden",side:"bottom",align:"start",sideOffset:4,children:u.jsxs(as,{className:"w-full h-full",children:[u.jsx("div",{className:"sticky top-0 z-10 bg-white px-2",children:u.jsx(is,{placeholder:"Search product..."})}),u.jsxs("div",{className:"overflow-y-auto max-h-[240px] px-2",children:[u.jsx(cs,{className:"py-2 text-sm text-muted-foreground",children:"No product found."}),u.jsx(us,{children:r.map(C=>u.jsx(ls,{onSelect:()=>k(C),children:u.jsxs("span",{className:"flex justify-between w-full",children:[C.name,u.jsxs("span",{className:"text-xs text-gray-400",children:[C.sizes.length," sizes"]})]})},C.name))})]})]})})]}),u.jsxs(he,{type:"button",variant:"ghost",size:"sm",onClick:()=>B([]),disabled:v.length===0,className:"text-red-500 hover:text-red-600",children:[u.jsx(or,{className:"w-4 h-4 mr-1"}),"Remove All"]})]}),v.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No product selected."}),((E=l.products)==null?void 0:E.message)&&u.jsx("p",{className:"text-sm text-red-500 font-medium",children:l.products.message}),u.jsx("div",{className:"max-h-[400px] md:max-h-[220px] overflow-y-auto px-1 rounded-xl space-y-2",ref:o,children:v.map((C,M)=>{var S,I,W,se,ie,ce,ue,le,h,b,y,m,_,P,z,j,q;const L=r.find(Y=>Y.name===C.name),V=(L==null?void 0:L.sizes)??[],K=g(`products.${M}.size`),Z=V.find(Y=>Y.size===K);return u.jsxs("div",{className:"relative grid grid-cols-2 md:grid-cols-3 gap-2 border border-gray-300 bg-gray-50 p-4 rounded-xl shadow-sm my-4",children:[u.jsx("div",{className:"absolute -top-3 left-2 text-sm text-gray-500 bg-white px-1 rounded flex items-center gap-2",children:C.name}),u.jsx("div",{className:"absolute -top-3 right-2",children:u.jsx(he,{type:"button",variant:"ghost",size:"icon",onClick:()=>D(M),className:"bg-red-100 hover:bg-red-200 text-red-600 rounded-full p-1 w-6 h-6","aria-label":"Remove product",children:u.jsx(dr,{className:"w-3 h-3"})})}),u.jsxs("div",{children:[u.jsx(Ve,{label:"Size",value:g(`products.${M}.size`),onChange:Y=>p(`products.${M}.size`,Y),options:V.map(Y=>Y.size),placeholder:"Select size",error:(W=(I=(S=l.products)==null?void 0:S[M])==null?void 0:I.size)==null?void 0:W.message}),((ie=(se=l.products)==null?void 0:se[M])==null?void 0:ie.size)&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:(ue=(ce=l.products[M])==null?void 0:ce.size)==null?void 0:ue.message})]}),u.jsx(_e,{label:"Quantity",placeholder:"Enter quantity",...a(`products.${M}.quantity`),error:(b=(h=(le=l.products)==null?void 0:le[M])==null?void 0:h.quantity)==null?void 0:b.message}),u.jsxs("div",{children:[u.jsx("div",{className:"flex gap-2",children:u.jsx(Ve,{label:"Order By",value:g(`products.${M}.order_by`),onChange:Y=>p(`products.${M}.order_by`,Y),options:(Z==null?void 0:Z.order_by)||[],placeholder:"Select",error:(_=(m=(y=l.products)==null?void 0:y[M])==null?void 0:m.order_by)==null?void 0:_.message})}),((z=(P=l.products)==null?void 0:P[M])==null?void 0:z.order_by)&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:(q=(j=l.products[M])==null?void 0:j.order_by)==null?void 0:q.message})]})]},C.id)})})]}),u.jsx(he,{type:"submit",className:"w-full mt-4",children:"Save Order"})]})]})})},tn=()=>{const[t,e]=cr.useState(!1);return u.jsxs(u.Fragment,{children:[t&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:u.jsx(fs,{open:t,setOpen:e})}),!t&&u.jsx("div",{children:u.jsxs(he,{size:"lg",className:"rounded-full",onClick:()=>e(!0),children:[u.jsx(ur,{}),"New Order"]})})]})};function U(t){return Array.isArray?Array.isArray(t):Et(t)==="[object Array]"}function gs(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function ps(t){return t==null?"":gs(t)}function G(t){return typeof t=="string"}function At(t){return typeof t=="number"}function ms(t){return t===!0||t===!1||vs(t)&&Et(t)=="[object Boolean]"}function Ct(t){return typeof t=="object"}function vs(t){return Ct(t)&&t!==null}function N(t){return t!=null}function Be(t){return!t.trim().length}function Et(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const xs="Incorrect 'index' type",bs=t=>`Invalid value for key ${t}`,ys=t=>`Pattern length exceeds max of ${t}.`,As=t=>`Missing ${t} property in key`,Cs=t=>`Property 'weight' in key '${t}' must be a positive integer`,Ge=Object.prototype.hasOwnProperty;class Es{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(n=>{let s=_t(n);this._keys.push(s),this._keyMap[s.id]=s,r+=s.weight}),this._keys.forEach(n=>{n.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function _t(t){let e=null,r=null,n=null,s=1,o=null;if(G(t)||U(t))n=t,e=He(t),r=je(t);else{if(!Ge.call(t,"name"))throw new Error(As("name"));const a=t.name;if(n=a,Ge.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(Cs(a));e=He(a),r=je(a),o=t.getFn}return{path:e,id:r,weight:s,src:n,getFn:o}}function He(t){return U(t)?t:t.split(".")}function je(t){return U(t)?t.join("."):t}function _s(t,e){let r=[],n=!1;const s=(o,a,i)=>{if(N(o))if(!a[i])r.push(o);else{let d=a[i];const c=o[d];if(!N(c))return;if(i===a.length-1&&(G(c)||At(c)||ms(c)))r.push(ps(c));else if(U(c)){n=!0;for(let l=0,g=c.length;l<g;l+=1)s(c[l],a,i+1)}else a.length&&s(c,a,i+1)}};return s(t,G(e)?e.split("."):e,0),n?r:r[0]}const ws={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Ms={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Ps={location:0,threshold:.6,distance:100},Bs={useExtendedSearch:!1,getFn:_s,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var x={...Ms,...ws,...Ps,...Bs};const Ss=/[^ ]+/g;function Ds(t=1,e=3){const r=new Map,n=Math.pow(10,e);return{get(s){const o=s.match(Ss).length;if(r.has(o))return r.get(o);const a=1/Math.pow(o,.5*t),i=parseFloat(Math.round(a*n)/n);return r.set(o,i),i},clear(){r.clear()}}}class Ke{constructor({getFn:e=x.getFn,fieldNormWeight:r=x.fieldNormWeight}={}){this.norm=Ds(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,G(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();G(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!N(e)||Be(e))return;let n={v:e,i:r,n:this.norm.get(e)};this.records.push(n)}_addObject(e,r){let n={i:r,$:{}};this.keys.forEach((s,o)=>{let a=s.getFn?s.getFn(e):this.getFn(e,s.path);if(N(a)){if(U(a)){let i=[];const d=[{nestedArrIndex:-1,value:a}];for(;d.length;){const{nestedArrIndex:c,value:l}=d.pop();if(N(l))if(G(l)&&!Be(l)){let g={v:l,i:c,n:this.norm.get(l)};i.push(g)}else U(l)&&l.forEach((g,p)=>{d.push({nestedArrIndex:p,value:g})})}n.$[o]=i}else if(G(a)&&!Be(a)){let i={v:a,n:this.norm.get(a)};n.$[o]=i}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function wt(t,e,{getFn:r=x.getFn,fieldNormWeight:n=x.fieldNormWeight}={}){const s=new Ke({getFn:r,fieldNormWeight:n});return s.setKeys(t.map(_t)),s.setSources(e),s.create(),s}function js(t,{getFn:e=x.getFn,fieldNormWeight:r=x.fieldNormWeight}={}){const{keys:n,records:s}=t,o=new Ke({getFn:e,fieldNormWeight:r});return o.setKeys(n),o.setIndexRecords(s),o}function be(t,{errors:e=0,currentLocation:r=0,expectedLocation:n=0,distance:s=x.distance,ignoreLocation:o=x.ignoreLocation}={}){const a=e/t.length;if(o)return a;const i=Math.abs(n-r);return s?a+i/s:i?1:a}function zs(t=[],e=x.minMatchCharLength){let r=[],n=-1,s=-1,o=0;for(let a=t.length;o<a;o+=1){let i=t[o];i&&n===-1?n=o:!i&&n!==-1&&(s=o-1,s-n+1>=e&&r.push([n,s]),n=-1)}return t[o-1]&&o-n>=e&&r.push([n,o-1]),r}const ee=32;function Rs(t,e,r,{location:n=x.location,distance:s=x.distance,threshold:o=x.threshold,findAllMatches:a=x.findAllMatches,minMatchCharLength:i=x.minMatchCharLength,includeMatches:d=x.includeMatches,ignoreLocation:c=x.ignoreLocation}={}){if(e.length>ee)throw new Error(ys(ee));const l=e.length,g=t.length,p=Math.max(0,Math.min(n,g));let v=o,A=p;const D=i>1||d,B=D?Array(g):[];let R;for(;(R=t.indexOf(e,A))>-1;){let E=be(e,{currentLocation:R,expectedLocation:p,distance:s,ignoreLocation:c});if(v=Math.min(E,v),A=R+l,D){let C=0;for(;C<l;)B[R+C]=1,C+=1}}A=-1;let F=[],$=1,k=l+g;const O=1<<l-1;for(let E=0;E<l;E+=1){let C=0,M=k;for(;C<M;)be(e,{errors:E,currentLocation:p+M,expectedLocation:p,distance:s,ignoreLocation:c})<=v?C=M:k=M,M=Math.floor((k-C)/2+C);k=M;let L=Math.max(1,p-M+1),V=a?g:Math.min(p+M,g)+l,K=Array(V+2);K[V+1]=(1<<E)-1;for(let S=V;S>=L;S-=1){let I=S-1,W=r[t.charAt(I)];if(D&&(B[I]=+!!W),K[S]=(K[S+1]<<1|1)&W,E&&(K[S]|=(F[S+1]|F[S])<<1|1|F[S+1]),K[S]&O&&($=be(e,{errors:E,currentLocation:I,expectedLocation:p,distance:s,ignoreLocation:c}),$<=v)){if(v=$,A=I,A<=p)break;L=Math.max(1,2*p-A)}}if(be(e,{errors:E+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:c})>v)break;F=K}const w={isMatch:A>=0,score:Math.max(.001,$)};if(D){const E=zs(B,i);E.length?d&&(w.indices=E):w.isMatch=!1}return w}function Fs(t){let e={};for(let r=0,n=t.length;r<n;r+=1){const s=t.charAt(r);e[s]=(e[s]||0)|1<<n-r-1}return e}const ye=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Mt{constructor(e,{location:r=x.location,threshold:n=x.threshold,distance:s=x.distance,includeMatches:o=x.includeMatches,findAllMatches:a=x.findAllMatches,minMatchCharLength:i=x.minMatchCharLength,isCaseSensitive:d=x.isCaseSensitive,ignoreDiacritics:c=x.ignoreDiacritics,ignoreLocation:l=x.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:s,includeMatches:o,findAllMatches:a,minMatchCharLength:i,isCaseSensitive:d,ignoreDiacritics:c,ignoreLocation:l},e=d?e:e.toLowerCase(),e=c?ye(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const g=(v,A)=>{this.chunks.push({pattern:v,alphabet:Fs(v),startIndex:A})},p=this.pattern.length;if(p>ee){let v=0;const A=p%ee,D=p-A;for(;v<D;)g(this.pattern.substr(v,ee),v),v+=ee;if(A){const B=p-ee;g(this.pattern.substr(B),B)}}else g(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,ignoreDiacritics:n,includeMatches:s}=this.options;if(e=r?e:e.toLowerCase(),e=n?ye(e):e,this.pattern===e){let D={isMatch:!0,score:0};return s&&(D.indices=[[0,e.length-1]]),D}const{location:o,distance:a,threshold:i,findAllMatches:d,minMatchCharLength:c,ignoreLocation:l}=this.options;let g=[],p=0,v=!1;this.chunks.forEach(({pattern:D,alphabet:B,startIndex:R})=>{const{isMatch:F,score:$,indices:k}=Rs(e,D,B,{location:o+R,distance:a,threshold:i,findAllMatches:d,minMatchCharLength:c,includeMatches:s,ignoreLocation:l});F&&(v=!0),p+=$,F&&k&&(g=[...g,...k])});let A={isMatch:v,score:v?p/this.chunks.length:1};return v&&s&&(A.indices=g),A}}class X{constructor(e){this.pattern=e}static isMultiMatch(e){return We(e,this.multiRegex)}static isSingleMatch(e){return We(e,this.singleRegex)}search(){}}function We(t,e){const r=t.match(e);return r?r[1]:null}class ks extends X{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Is extends X{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Ns extends X{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Os extends X{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Ks extends X{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class $s extends X{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Pt extends X{constructor(e,{location:r=x.location,threshold:n=x.threshold,distance:s=x.distance,includeMatches:o=x.includeMatches,findAllMatches:a=x.findAllMatches,minMatchCharLength:i=x.minMatchCharLength,isCaseSensitive:d=x.isCaseSensitive,ignoreDiacritics:c=x.ignoreDiacritics,ignoreLocation:l=x.ignoreLocation}={}){super(e),this._bitapSearch=new Mt(e,{location:r,threshold:n,distance:s,includeMatches:o,findAllMatches:a,minMatchCharLength:i,isCaseSensitive:d,ignoreDiacritics:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Bt extends X{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,n;const s=[],o=this.pattern.length;for(;(n=e.indexOf(this.pattern,r))>-1;)r=n+o,s.push([n,r-1]);const a=!!s.length;return{isMatch:a,score:a?0:1,indices:s}}}const ze=[ks,Bt,Ns,Os,$s,Ks,Is,Pt],Ye=ze.length,Ts=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Ls="|";function Vs(t,e={}){return t.split(Ls).map(r=>{let n=r.trim().split(Ts).filter(o=>o&&!!o.trim()),s=[];for(let o=0,a=n.length;o<a;o+=1){const i=n[o];let d=!1,c=-1;for(;!d&&++c<Ye;){const l=ze[c];let g=l.isMultiMatch(i);g&&(s.push(new l(g,e)),d=!0)}if(!d)for(c=-1;++c<Ye;){const l=ze[c];let g=l.isSingleMatch(i);if(g){s.push(new l(g,e));break}}}return s})}const Gs=new Set([Pt.type,Bt.type]);class Hs{constructor(e,{isCaseSensitive:r=x.isCaseSensitive,ignoreDiacritics:n=x.ignoreDiacritics,includeMatches:s=x.includeMatches,minMatchCharLength:o=x.minMatchCharLength,ignoreLocation:a=x.ignoreLocation,findAllMatches:i=x.findAllMatches,location:d=x.location,threshold:c=x.threshold,distance:l=x.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:n,includeMatches:s,minMatchCharLength:o,findAllMatches:i,ignoreLocation:a,location:d,threshold:c,distance:l},e=r?e:e.toLowerCase(),e=n?ye(e):e,this.pattern=e,this.query=Vs(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:s,ignoreDiacritics:o}=this.options;e=s?e:e.toLowerCase(),e=o?ye(e):e;let a=0,i=[],d=0;for(let c=0,l=r.length;c<l;c+=1){const g=r[c];i.length=0,a=0;for(let p=0,v=g.length;p<v;p+=1){const A=g[p],{isMatch:D,indices:B,score:R}=A.search(e);if(D){if(a+=1,d+=R,n){const F=A.constructor.type;Gs.has(F)?i=[...i,...B]:i.push(B)}}else{d=0,a=0,i.length=0;break}}if(a){let p={isMatch:!0,score:d/a};return n&&(p.indices=i),p}}return{isMatch:!1,score:1}}}const Re=[];function Ws(...t){Re.push(...t)}function Fe(t,e){for(let r=0,n=Re.length;r<n;r+=1){let s=Re[r];if(s.condition(t,e))return new s(t,e)}return new Mt(t,e)}const Ae={AND:"$and",OR:"$or"},ke={PATH:"$path",PATTERN:"$val"},Ie=t=>!!(t[Ae.AND]||t[Ae.OR]),Ys=t=>!!t[ke.PATH],Us=t=>!U(t)&&Ct(t)&&!Ie(t),Ue=t=>({[Ae.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function St(t,e,{auto:r=!0}={}){const n=s=>{let o=Object.keys(s);const a=Ys(s);if(!a&&o.length>1&&!Ie(s))return n(Ue(s));if(Us(s)){const d=a?s[ke.PATH]:o[0],c=a?s[ke.PATTERN]:s[d];if(!G(c))throw new Error(bs(d));const l={keyId:je(d),pattern:c};return r&&(l.searcher=Fe(c,e)),l}let i={children:[],operator:o[0]};return o.forEach(d=>{const c=s[d];U(c)&&c.forEach(l=>{i.children.push(n(l))})}),i};return Ie(t)||(t=Ue(t)),n(t)}function Js(t,{ignoreFieldNorm:e=x.ignoreFieldNorm}){t.forEach(r=>{let n=1;r.matches.forEach(({key:s,norm:o,score:a})=>{const i=s?s.weight:null;n*=Math.pow(a===0&&i?Number.EPSILON:a,(i||1)*(e?1:o))}),r.score=n})}function Qs(t,e){const r=t.matches;e.matches=[],N(r)&&r.forEach(n=>{if(!N(n.indices)||!n.indices.length)return;const{indices:s,value:o}=n;let a={indices:s,value:o};n.key&&(a.key=n.key.src),n.idx>-1&&(a.refIndex=n.idx),e.matches.push(a)})}function Xs(t,e){e.score=t.score}function Zs(t,e,{includeMatches:r=x.includeMatches,includeScore:n=x.includeScore}={}){const s=[];return r&&s.push(Qs),n&&s.push(Xs),t.map(o=>{const{idx:a}=o,i={item:e[a],refIndex:a};return s.length&&s.forEach(d=>{d(o,i)}),i})}class xe{constructor(e,r={},n){this.options={...x,...r},this.options.useExtendedSearch,this._keyStore=new Es(this.options.keys),this.setCollection(e,n)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof Ke))throw new Error(xs);this._myIndex=r||wt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){N(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let n=0,s=this._docs.length;n<s;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,s-=1,r.push(o))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:n,includeScore:s,shouldSort:o,sortFn:a,ignoreFieldNorm:i}=this.options;let d=G(e)?G(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Js(d,{ignoreFieldNorm:i}),o&&d.sort(a),At(r)&&r>-1&&(d=d.slice(0,r)),Zs(d,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(e){const r=Fe(e,this.options),{records:n}=this._myIndex,s=[];return n.forEach(({v:o,i:a,n:i})=>{if(!N(o))return;const{isMatch:d,score:c,indices:l}=r.searchIn(o);d&&s.push({item:o,idx:a,matches:[{score:c,value:o,norm:i,indices:l}]})}),s}_searchLogical(e){const r=St(e,this.options),n=(i,d,c)=>{if(!i.children){const{keyId:g,searcher:p}=i,v=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(d,g),searcher:p});return v&&v.length?[{idx:c,item:d,matches:v}]:[]}const l=[];for(let g=0,p=i.children.length;g<p;g+=1){const v=i.children[g],A=n(v,d,c);if(A.length)l.push(...A);else if(i.operator===Ae.AND)return[]}return l},s=this._myIndex.records,o={},a=[];return s.forEach(({$:i,i:d})=>{if(N(i)){let c=n(r,i,d);c.length&&(o[d]||(o[d]={idx:d,item:i,matches:[]},a.push(o[d])),c.forEach(({matches:l})=>{o[d].matches.push(...l)}))}}),a}_searchObjectList(e){const r=Fe(e,this.options),{keys:n,records:s}=this._myIndex,o=[];return s.forEach(({$:a,i})=>{if(!N(a))return;let d=[];n.forEach((c,l)=>{d.push(...this._findMatches({key:c,value:a[l],searcher:r}))}),d.length&&o.push({idx:i,item:a,matches:d})}),o}_findMatches({key:e,value:r,searcher:n}){if(!N(r))return[];let s=[];if(U(r))r.forEach(({v:o,i:a,n:i})=>{if(!N(o))return;const{isMatch:d,score:c,indices:l}=n.searchIn(o);d&&s.push({score:c,key:e,value:o,idx:a,norm:i,indices:l})});else{const{v:o,n:a}=r,{isMatch:i,score:d,indices:c}=n.searchIn(o);i&&s.push({score:d,key:e,value:o,norm:a,indices:c})}return s}}xe.version="7.1.0";xe.createIndex=wt;xe.parseIndex=js;xe.config=x;xe.parseQuery=St;Ws(Hs);export{tn as A,xe as F};
