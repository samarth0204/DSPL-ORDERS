import{c as Ft,R as Be,d as kt,j as u,b as Ze,C as qe,e as T,f as It,X as Nt,T as Ot,D as Kt,P as et,O as tt,r as f,g as rt,u as $t,h as Tt,i as Lt,k as te,l as st,m as H,n as fe,A as nt,o as ot,p as Vt,q as Gt,s as Ht,t as Wt,v as Yt,F as Ut,w as Jt,x as Qt,y as Xt,z as ge,S as Zt,L as qt,B as er,E as tr,G as rr,H as sr,J as nr,K as or,M as ar,N as _e,Q as he,U as ir,V as cr,W as ur,Y as lr,Z as dr}from"./index-JY0vZ2Ah.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M5 12h14",key:"1ays0h"}]],fr=Ft("minus",hr),Te=t=>{let e;const r=new Set,n=(c,l)=>{const g=typeof c=="function"?c(e):c;if(!Object.is(g,e)){const m=e;e=l??(typeof g!="object"||g===null)?g:Object.assign({},e,g),r.forEach(v=>v(e,m))}},s=()=>e,i={setState:n,getState:s,getInitialState:()=>d,subscribe:c=>(r.add(c),()=>r.delete(c))},d=e=t(n,s,i);return i},gr=t=>t?Te(t):Te,mr=t=>t;function pr(t,e=mr){const r=Be.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return Be.useDebugValue(r),r}const Le=t=>{const e=gr(t),r=n=>pr(e,n);return Object.assign(r,e),r},at=t=>t?Le(t):Le,vr=at(t=>({orders:kt,addOrder:e=>t(r=>({orders:[...r.orders,e]}))}));function xr({...t}){return u.jsx(Ze,{"data-slot":"dialog",...t})}function br({...t}){return u.jsx(et,{"data-slot":"dialog-portal",...t})}function yr({className:t,...e}){return u.jsx(tt,{"data-slot":"dialog-overlay",className:T("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function Ar({className:t,children:e,showCloseButton:r=!0,...n}){return u.jsxs(br,{"data-slot":"dialog-portal",children:[u.jsx(yr,{}),u.jsxs(qe,{"data-slot":"dialog-content",className:T("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[e,r&&u.jsxs(It,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[u.jsx(Nt,{}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Cr({className:t,...e}){return u.jsx("div",{"data-slot":"dialog-header",className:T("flex flex-col gap-2 text-center sm:text-left",t),...e})}function Er({className:t,...e}){return u.jsx(Ot,{"data-slot":"dialog-title",className:T("text-lg leading-none font-semibold",t),...e})}function _r({className:t,...e}){return u.jsx(Kt,{"data-slot":"dialog-description",className:T("text-muted-foreground text-sm",t),...e})}var Ce="Popover",[it,an]=Lt(Ce,[rt]),me=rt(),[wr,Q]=it(Ce),ct=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!1}=t,i=me(e),d=f.useRef(null),[c,l]=f.useState(!1),[g,m]=$t({prop:n,defaultProp:s??!1,onChange:o,caller:Ce});return u.jsx(Tt,{...i,children:u.jsx(wr,{scope:e,contentId:te(),triggerRef:d,open:g,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(v=>!v),[m]),hasCustomAnchor:c,onCustomAnchorAdd:f.useCallback(()=>l(!0),[]),onCustomAnchorRemove:f.useCallback(()=>l(!1),[]),modal:a,children:r})})};ct.displayName=Ce;var ut="PopoverAnchor",Sr=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Q(ut,r),o=me(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:i}=s;return f.useEffect(()=>(a(),()=>i()),[a,i]),u.jsx(nt,{...o,...n,ref:e})});Sr.displayName=ut;var lt="PopoverTrigger",dt=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Q(lt,r),o=me(r),a=st(e,s.triggerRef),i=u.jsx(H.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":pt(s.open),...n,ref:a,onClick:fe(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?i:u.jsx(nt,{asChild:!0,...o,children:i})});dt.displayName=lt;var Oe="PopoverPortal",[Mr,Pr]=it(Oe,{forceMount:void 0}),ht=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,o=Q(Oe,e);return u.jsx(Mr,{scope:e,forceMount:r,children:u.jsx(ot,{present:r||o.open,children:u.jsx(Vt,{asChild:!0,container:s,children:n})})})};ht.displayName=Oe;var ae="PopoverContent",ft=f.forwardRef((t,e)=>{const r=Pr(ae,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,o=Q(ae,t.__scopePopover);return u.jsx(ot,{present:n||o.open,children:o.modal?u.jsx(jr,{...s,ref:e}):u.jsx(Dr,{...s,ref:e})})});ft.displayName=ae;var Br=Wt("PopoverContent.RemoveScroll"),jr=f.forwardRef((t,e)=>{const r=Q(ae,t.__scopePopover),n=f.useRef(null),s=st(e,n),o=f.useRef(!1);return f.useEffect(()=>{const a=n.current;if(a)return Gt(a)},[]),u.jsx(Ht,{as:Br,allowPinchZoom:!0,children:u.jsx(gt,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(t.onCloseAutoFocus,a=>{var i;a.preventDefault(),o.current||(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:fe(t.onPointerDownOutside,a=>{const i=a.detail.originalEvent,d=i.button===0&&i.ctrlKey===!0,c=i.button===2||d;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:fe(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),Dr=f.forwardRef((t,e)=>{const r=Q(ae,t.__scopePopover),n=f.useRef(!1),s=f.useRef(!1);return u.jsx(gt,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,i;(a=t.onCloseAutoFocus)==null||a.call(t,o),o.defaultPrevented||(n.current||(i=r.triggerRef.current)==null||i.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var d,c;(d=t.onInteractOutside)==null||d.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((c=r.triggerRef.current)==null?void 0:c.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),gt=f.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:l,...g}=t,m=Q(ae,r),v=me(r);return Yt(),u.jsx(Ut,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:u.jsx(Jt,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:l,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:u.jsx(Qt,{"data-state":pt(m.open),role:"dialog",id:m.contentId,...v,...g,ref:e,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),mt="PopoverClose",zr=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Q(mt,r);return u.jsx(H.button,{type:"button",...n,ref:e,onClick:fe(t.onClick,()=>s.onOpenChange(!1))})});zr.displayName=mt;var Rr="PopoverArrow",Fr=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=me(r);return u.jsx(Xt,{...s,...n,ref:e})});Fr.displayName=Rr;function pt(t){return t?"open":"closed"}var kr=ct,Ir=dt,Nr=ht,Or=ft;function Kr({...t}){return u.jsx(kr,{"data-slot":"popover",...t})}function $r({...t}){return u.jsx(Ir,{"data-slot":"popover-trigger",...t})}function Tr({className:t,align:e="center",sideOffset:r=4,...n}){return u.jsx(Nr,{children:u.jsx(Or,{"data-slot":"popover-content",align:e,sideOffset:r,className:T("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}var Ve=1,Lr=.9,Vr=.8,Gr=.17,we=.1,Se=.999,Hr=.9999,Wr=.99,Yr=/[\\\/_+.#"@\[\(\{&]/,Ur=/[\\\/_+.#"@\[\(\{&]/g,Jr=/[\s-]/,vt=/[\s-]/g;function je(t,e,r,n,s,o,a){if(o===e.length)return s===t.length?Ve:Wr;var i=`${s},${o}`;if(a[i]!==void 0)return a[i];for(var d=n.charAt(o),c=r.indexOf(d,s),l=0,g,m,v,A;c>=0;)g=je(t,e,r,n,c+1,o+1,a),g>l&&(c===s?g*=Ve:Yr.test(t.charAt(c-1))?(g*=Vr,v=t.slice(s,c-1).match(Ur),v&&s>0&&(g*=Math.pow(Se,v.length))):Jr.test(t.charAt(c-1))?(g*=Lr,A=t.slice(s,c-1).match(vt),A&&s>0&&(g*=Math.pow(Se,A.length))):(g*=Gr,s>0&&(g*=Math.pow(Se,c-s))),t.charAt(c)!==e.charAt(o)&&(g*=Hr)),(g<we&&r.charAt(c-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&r.charAt(c-1)!==n.charAt(o))&&(m=je(t,e,r,n,c+1,o+2,a),m*we>g&&(g=m*we)),g>l&&(l=g),c=r.indexOf(d,c+1);return a[i]=l,l}function Ge(t){return t.toLowerCase().replace(vt," ")}function Qr(t,e,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,je(t,e,Ge(t),Ge(e),0,0,{})}var de='[cmdk-group=""]',Me='[cmdk-group-items=""]',Xr='[cmdk-group-heading=""]',xt='[cmdk-item=""]',He=`${xt}:not([aria-disabled="true"])`,De="cmdk-item-select",ne="data-value",Zr=(t,e,r)=>Qr(t,e,r),bt=f.createContext(void 0),pe=()=>f.useContext(bt),yt=f.createContext(void 0),Ke=()=>f.useContext(yt),At=f.createContext(void 0),Ct=f.forwardRef((t,e)=>{let r=oe(()=>{var h,b;return{search:"",value:(b=(h=t.value)!=null?h:t.defaultValue)!=null?b:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=oe(()=>new Set),s=oe(()=>new Map),o=oe(()=>new Map),a=oe(()=>new Set),i=Et(t),{label:d,children:c,value:l,onValueChange:g,filter:m,shouldFilter:v,loop:A,disablePointerSelection:j=!1,vimBindings:P=!0,...R}=t,F=te(),$=te(),k=te(),O=f.useRef(null),w=us();re(()=>{if(l!==void 0){let h=l.trim();r.current.value=h,E.emit()}},[l]),re(()=>{w(6,Z)},[]);let E=f.useMemo(()=>({subscribe:h=>(a.current.add(h),()=>a.current.delete(h)),snapshot:()=>r.current,setState:(h,b,y)=>{var p,_,M,z;if(!Object.is(r.current[h],b)){if(r.current[h]=b,h==="search")K(),L(),w(1,V);else if(h==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let D=document.getElementById(k);D?D.focus():(p=document.getElementById(F))==null||p.focus()}if(w(7,()=>{var D;r.current.selectedItemId=(D=B())==null?void 0:D.id,E.emit()}),y||w(5,Z),((_=i.current)==null?void 0:_.value)!==void 0){let D=b??"";(z=(M=i.current).onValueChange)==null||z.call(M,D);return}}E.emit()}},emit:()=>{a.current.forEach(h=>h())}}),[]),C=f.useMemo(()=>({value:(h,b,y)=>{var p;b!==((p=o.current.get(h))==null?void 0:p.value)&&(o.current.set(h,{value:b,keywords:y}),r.current.filtered.items.set(h,S(b,y)),w(2,()=>{L(),E.emit()}))},item:(h,b)=>(n.current.add(h),b&&(s.current.has(b)?s.current.get(b).add(h):s.current.set(b,new Set([h]))),w(3,()=>{K(),L(),r.current.value||V(),E.emit()}),()=>{o.current.delete(h),n.current.delete(h),r.current.filtered.items.delete(h);let y=B();w(4,()=>{K(),(y==null?void 0:y.getAttribute("id"))===h&&V(),E.emit()})}),group:h=>(s.current.has(h)||s.current.set(h,new Set),()=>{o.current.delete(h),s.current.delete(h)}),filter:()=>i.current.shouldFilter,label:d||t["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:F,inputId:k,labelId:$,listInnerRef:O}),[]);function S(h,b){var y,p;let _=(p=(y=i.current)==null?void 0:y.filter)!=null?p:Zr;return h?_(h,r.current.search,b):0}function L(){if(!r.current.search||i.current.shouldFilter===!1)return;let h=r.current.filtered.items,b=[];r.current.filtered.groups.forEach(p=>{let _=s.current.get(p),M=0;_.forEach(z=>{let D=h.get(z);M=Math.max(D,M)}),b.push([p,M])});let y=O.current;I().sort((p,_)=>{var M,z;let D=p.getAttribute("id"),q=_.getAttribute("id");return((M=h.get(q))!=null?M:0)-((z=h.get(D))!=null?z:0)}).forEach(p=>{let _=p.closest(Me);_?_.appendChild(p.parentElement===_?p:p.closest(`${Me} > *`)):y.appendChild(p.parentElement===y?p:p.closest(`${Me} > *`))}),b.sort((p,_)=>_[1]-p[1]).forEach(p=>{var _;let M=(_=O.current)==null?void 0:_.querySelector(`${de}[${ne}="${encodeURIComponent(p[0])}"]`);M==null||M.parentElement.appendChild(M)})}function V(){let h=I().find(y=>y.getAttribute("aria-disabled")!=="true"),b=h==null?void 0:h.getAttribute(ne);E.setState("value",b||void 0)}function K(){var h,b,y,p;if(!r.current.search||i.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let _=0;for(let M of n.current){let z=(b=(h=o.current.get(M))==null?void 0:h.value)!=null?b:"",D=(p=(y=o.current.get(M))==null?void 0:y.keywords)!=null?p:[],q=S(z,D);r.current.filtered.items.set(M,q),q>0&&_++}for(let[M,z]of s.current)for(let D of z)if(r.current.filtered.items.get(D)>0){r.current.filtered.groups.add(M);break}r.current.filtered.count=_}function Z(){var h,b,y;let p=B();p&&(((h=p.parentElement)==null?void 0:h.firstChild)===p&&((y=(b=p.closest(de))==null?void 0:b.querySelector(Xr))==null||y.scrollIntoView({block:"nearest"})),p.scrollIntoView({block:"nearest"}))}function B(){var h;return(h=O.current)==null?void 0:h.querySelector(`${xt}[aria-selected="true"]`)}function I(){var h;return Array.from(((h=O.current)==null?void 0:h.querySelectorAll(He))||[])}function W(h){let b=I()[h];b&&E.setState("value",b.getAttribute(ne))}function se(h){var b;let y=B(),p=I(),_=p.findIndex(z=>z===y),M=p[_+h];(b=i.current)!=null&&b.loop&&(M=_+h<0?p[p.length-1]:_+h===p.length?p[0]:p[_+h]),M&&E.setState("value",M.getAttribute(ne))}function ie(h){let b=B(),y=b==null?void 0:b.closest(de),p;for(;y&&!p;)y=h>0?is(y,de):cs(y,de),p=y==null?void 0:y.querySelector(He);p?E.setState("value",p.getAttribute(ne)):se(h)}let ce=()=>W(I().length-1),ue=h=>{h.preventDefault(),h.metaKey?ce():h.altKey?ie(1):se(1)},le=h=>{h.preventDefault(),h.metaKey?W(0):h.altKey?ie(-1):se(-1)};return f.createElement(H.div,{ref:e,tabIndex:-1,...R,"cmdk-root":"",onKeyDown:h=>{var b;(b=R.onKeyDown)==null||b.call(R,h);let y=h.nativeEvent.isComposing||h.keyCode===229;if(!(h.defaultPrevented||y))switch(h.key){case"n":case"j":{P&&h.ctrlKey&&ue(h);break}case"ArrowDown":{ue(h);break}case"p":case"k":{P&&h.ctrlKey&&le(h);break}case"ArrowUp":{le(h);break}case"Home":{h.preventDefault(),W(0);break}case"End":{h.preventDefault(),ce();break}case"Enter":{h.preventDefault();let p=B();if(p){let _=new Event(De);p.dispatchEvent(_)}}}}},f.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:ds},d),Ee(t,h=>f.createElement(yt.Provider,{value:E},f.createElement(bt.Provider,{value:C},h))))}),qr=f.forwardRef((t,e)=>{var r,n;let s=te(),o=f.useRef(null),a=f.useContext(At),i=pe(),d=Et(t),c=(n=(r=d.current)==null?void 0:r.forceMount)!=null?n:a==null?void 0:a.forceMount;re(()=>{if(!c)return i.item(s,a==null?void 0:a.id)},[c]);let l=_t(s,o,[t.value,t.children,o],t.keywords),g=Ke(),m=J(w=>w.value&&w.value===l.current),v=J(w=>c||i.filter()===!1?!0:w.search?w.filtered.items.get(s)>0:!0);f.useEffect(()=>{let w=o.current;if(!(!w||t.disabled))return w.addEventListener(De,A),()=>w.removeEventListener(De,A)},[v,t.onSelect,t.disabled]);function A(){var w,E;j(),(E=(w=d.current).onSelect)==null||E.call(w,l.current)}function j(){g.setState("value",l.current,!0)}if(!v)return null;let{disabled:P,value:R,onSelect:F,forceMount:$,keywords:k,...O}=t;return f.createElement(H.div,{ref:ge(o,e),...O,id:s,"cmdk-item":"",role:"option","aria-disabled":!!P,"aria-selected":!!m,"data-disabled":!!P,"data-selected":!!m,onPointerMove:P||i.getDisablePointerSelection()?void 0:j,onClick:P?void 0:A},t.children)}),es=f.forwardRef((t,e)=>{let{heading:r,children:n,forceMount:s,...o}=t,a=te(),i=f.useRef(null),d=f.useRef(null),c=te(),l=pe(),g=J(v=>s||l.filter()===!1?!0:v.search?v.filtered.groups.has(a):!0);re(()=>l.group(a),[]),_t(a,i,[t.value,t.heading,d]);let m=f.useMemo(()=>({id:a,forceMount:s}),[s]);return f.createElement(H.div,{ref:ge(i,e),...o,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},r&&f.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),Ee(t,v=>f.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},f.createElement(At.Provider,{value:m},v))))}),ts=f.forwardRef((t,e)=>{let{alwaysRender:r,...n}=t,s=f.useRef(null),o=J(a=>!a.search);return!r&&!o?null:f.createElement(H.div,{ref:ge(s,e),...n,"cmdk-separator":"",role:"separator"})}),rs=f.forwardRef((t,e)=>{let{onValueChange:r,...n}=t,s=t.value!=null,o=Ke(),a=J(c=>c.search),i=J(c=>c.selectedItemId),d=pe();return f.useEffect(()=>{t.value!=null&&o.setState("search",t.value)},[t.value]),f.createElement(H.input,{ref:e,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":i,id:d.inputId,type:"text",value:s?t.value:a,onChange:c=>{s||o.setState("search",c.target.value),r==null||r(c.target.value)}})}),ss=f.forwardRef((t,e)=>{let{children:r,label:n="Suggestions",...s}=t,o=f.useRef(null),a=f.useRef(null),i=J(c=>c.selectedItemId),d=pe();return f.useEffect(()=>{if(a.current&&o.current){let c=a.current,l=o.current,g,m=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let v=c.offsetHeight;l.style.setProperty("--cmdk-list-height",v.toFixed(1)+"px")})});return m.observe(c),()=>{cancelAnimationFrame(g),m.unobserve(c)}}},[]),f.createElement(H.div,{ref:ge(o,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":n,id:d.listId},Ee(t,c=>f.createElement("div",{ref:ge(a,d.listInnerRef),"cmdk-list-sizer":""},c)))}),ns=f.forwardRef((t,e)=>{let{open:r,onOpenChange:n,overlayClassName:s,contentClassName:o,container:a,...i}=t;return f.createElement(Ze,{open:r,onOpenChange:n},f.createElement(et,{container:a},f.createElement(tt,{"cmdk-overlay":"",className:s}),f.createElement(qe,{"aria-label":t.label,"cmdk-dialog":"",className:o},f.createElement(Ct,{ref:e,...i}))))}),os=f.forwardRef((t,e)=>J(r=>r.filtered.count===0)?f.createElement(H.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),as=f.forwardRef((t,e)=>{let{progress:r,children:n,label:s="Loading...",...o}=t;return f.createElement(H.div,{ref:e,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Ee(t,a=>f.createElement("div",{"aria-hidden":!0},a)))}),ve=Object.assign(Ct,{List:ss,Item:qr,Input:rs,Group:es,Separator:ts,Dialog:ns,Empty:os,Loading:as});function is(t,e){let r=t.nextElementSibling;for(;r;){if(r.matches(e))return r;r=r.nextElementSibling}}function cs(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return r;r=r.previousElementSibling}}function Et(t){let e=f.useRef(t);return re(()=>{e.current=t}),e}var re=typeof window>"u"?f.useEffect:f.useLayoutEffect;function oe(t){let e=f.useRef();return e.current===void 0&&(e.current=t()),e}function J(t){let e=Ke(),r=()=>t(e.snapshot());return f.useSyncExternalStore(e.subscribe,r,r)}function _t(t,e,r,n=[]){let s=f.useRef(),o=pe();return re(()=>{var a;let i=(()=>{var c;for(let l of r){if(typeof l=="string")return l.trim();if(typeof l=="object"&&"current"in l)return l.current?(c=l.current.textContent)==null?void 0:c.trim():s.current}})(),d=n.map(c=>c.trim());o.value(t,i,d),(a=e.current)==null||a.setAttribute(ne,i),s.current=i}),s}var us=()=>{let[t,e]=f.useState(),r=oe(()=>new Map);return re(()=>{r.current.forEach(n=>n()),r.current=new Map},[t]),(n,s)=>{r.current.set(n,s),e({})}};function ls(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function Ee({asChild:t,children:e},r){return t&&f.isValidElement(e)?f.cloneElement(ls(e),{ref:e.ref},r(e.props.children)):r(e)}var ds={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function hs({className:t,...e}){return u.jsx(ve,{"data-slot":"command",className:T("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...e})}function fs({className:t,...e}){return u.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[u.jsx(Zt,{className:"size-4 shrink-0 opacity-50"}),u.jsx(ve.Input,{"data-slot":"command-input",className:T("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...e})]})}function gs({...t}){return u.jsx(ve.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function ms({className:t,...e}){return u.jsx(ve.Group,{"data-slot":"command-group",className:T("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...e})}function ps({className:t,...e}){return u.jsx(ve.Item,{"data-slot":"command-item",className:T("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}const vs=[{name:"Mirchi Gold",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Haldi Gold",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Dhaniya Gold",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Mirchi Royal",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Haldi Royal",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Dhaniya Royal",sizes:[{size:"1 kg",order_by:["Bag","Kg"]},{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]},{size:"100gm",order_by:["Bag","Kg"]}]},{name:"Mirchi VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]},{size:"20 Rs",order_by:["PKT","Bag"]}]},{name:"Haldi VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]},{size:"20 Rs",order_by:["PKT","Bag"]}]},{name:"Dhaniya VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]},{size:"20 Rs",order_by:["PKT","Bag"]}]},{name:"Jeeravan VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]}]},{name:"Chicken VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]}]},{name:"Mutton VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]}]},{name:"Garam VAP",sizes:[{size:"10 Rs",order_by:["PKT","Bag"]}]},{name:"Achar Masala Gold",sizes:[{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]}]},{name:"Achar Masala Royal",sizes:[{size:"500gm",order_by:["Bag","Kg"]},{size:"200gm",order_by:["Bag","Kg"]}]},{name:"Chana Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Chat Masala",sizes:[{size:"100gm",order_by:["Pcs"]},{size:"500gm",order_by:["Kg"]}]},{name:"Chicken Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"jeeravan Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"kashmiri Mirch",sizes:[{size:"100gm",order_by:["Pcs"]},{size:"500gm",order_by:["Kg"]}]},{name:"Kasuri Methi",sizes:[{size:"100gm",order_by:["Kg","Pcs"]},{size:"25gm",order_by:["Pcs"]}]},{name:"Kitchen King",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Mutton Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Sambhar Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Pav Bhaji Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Dahi Vada Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Sabji Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Shahi Paneer Masala",sizes:[{size:"100gm",order_by:["Pcs"]}]},{name:"Amchoor",sizes:[{size:"100gm",order_by:["Pcs"]}]}],xs=at(()=>({availableProducts:vs})),We=({label:t,value:e,onChange:r,options:n,placeholder:s,error:o,className:a})=>u.jsxs("div",{className:T("w-full space-y-1",a),children:[u.jsx(qt,{className:"text-xs font-medium text-muted-foreground",children:t}),u.jsxs(er,{value:e,onValueChange:r,children:[u.jsx(tr,{className:"w-full h-10 text-sm",children:u.jsx(rr,{placeholder:s||"Select"})}),u.jsx(sr,{children:n.map(i=>u.jsx(nr,{value:i,children:i},i))})]}),o&&u.jsx("p",{className:"text-xs text-red-500",children:o})]}),bs=({open:t,setOpen:e})=>{var O,w,E;const r=xs(C=>C.availableProducts),[n,s]=f.useState(!1),o=f.useRef(null),{register:a,control:i,handleSubmit:d,reset:c,formState:{errors:l},watch:g,setValue:m}=or({resolver:ur(lr),defaultValues:{clientName:"",deliveryDetails:"",products:[]},mode:"onTouched",reValidateMode:"onChange"}),{fields:v,append:A,remove:j,replace:P}=ar({control:i,name:"products"}),R=vr(C=>C.addOrder),F=C=>{R(C),c(),e(!1)},$=C=>{if(!C){if(!window.confirm("You have unsaved changes. Are you sure you want to discard them?"))return;c()}e(C)},k=C=>{A({name:C.name,size:"",order_by:"",quantity:""}),s(!1),setTimeout(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},0)};return u.jsx(xr,{open:t,onOpenChange:$,children:u.jsxs(Ar,{className:"max-w-full md:max-w-[700px] max-h-[95vh] overflow-y-auto",children:[u.jsxs(Cr,{children:[u.jsx(Er,{children:"Add New Order"}),u.jsx(_r,{children:"Click on the plus icon and select the product to add to the order."})]}),u.jsxs("form",{onSubmit:d(F),children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[u.jsx(_e,{label:"Client Name",placeholder:"Enter client name",...a("clientName"),error:(O=l.clientName)==null?void 0:O.message}),u.jsx(_e,{label:"Delivery Option",placeholder:"Enter delivery details",...a("deliveryDetails"),error:(w=l.deliveryDetails)==null?void 0:w.message})]}),u.jsxs("div",{className:"mt-4 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(Kr,{modal:!0,open:n,onOpenChange:s,children:[u.jsx($r,{asChild:!0,children:u.jsxs(he,{variant:"outline",size:"sm",children:[u.jsx(ir,{className:"w-4 h-4 mr-1"}),"Add New Product"]})}),u.jsx(Tr,{className:"p-0 w-[300px] max-h-[300px] overflow-hidden",side:"bottom",align:"start",sideOffset:4,children:u.jsxs(hs,{className:"w-full h-full",children:[u.jsx("div",{className:"sticky top-0 z-10 bg-white px-2",children:u.jsx(fs,{placeholder:"Search product..."})}),u.jsxs("div",{className:"overflow-y-auto max-h-[240px] px-2",children:[u.jsx(gs,{className:"py-2 text-sm text-muted-foreground",children:"No product found."}),u.jsx(ms,{children:r.map(C=>u.jsx(ps,{onSelect:()=>k(C),children:u.jsxs("span",{className:"flex justify-between w-full",children:[C.name,u.jsxs("span",{className:"text-xs text-gray-400",children:[C.sizes.length," sizes"]})]})},C.name))})]})]})})]}),u.jsxs(he,{type:"button",variant:"ghost",size:"sm",onClick:()=>P([]),disabled:v.length===0,className:"text-red-500 hover:text-red-600",children:[u.jsx(cr,{className:"w-4 h-4 mr-1"}),"Remove All"]})]}),v.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No product selected."}),((E=l.products)==null?void 0:E.message)&&u.jsx("p",{className:"text-sm text-red-500 font-medium",children:l.products.message}),u.jsx("div",{className:"max-h-[400px] md:max-h-[220px] overflow-y-auto px-1 rounded-xl space-y-2",ref:o,children:v.map((C,S)=>{var B,I,W,se,ie,ce,ue,le,h,b,y,p,_,M,z,D,q;const L=r.find(Y=>Y.name===C.name),V=(L==null?void 0:L.sizes)??[],K=g(`products.${S}.size`),Z=V.find(Y=>Y.size===K);return u.jsxs("div",{className:"relative grid grid-cols-2 md:grid-cols-3 gap-2 border border-gray-300 bg-gray-50 p-4 rounded-xl shadow-sm my-4",children:[u.jsx("div",{className:"absolute -top-3 left-2 text-sm text-gray-500 bg-white px-1 rounded flex items-center gap-2",children:C.name}),u.jsx("div",{className:"absolute -top-3 right-2",children:u.jsx(he,{type:"button",variant:"ghost",size:"icon",onClick:()=>j(S),className:"bg-red-100 hover:bg-red-200 text-red-600 rounded-full p-1 w-6 h-6","aria-label":"Remove product",children:u.jsx(fr,{className:"w-3 h-3"})})}),u.jsxs("div",{children:[u.jsx(We,{label:"Size",value:g(`products.${S}.size`),onChange:Y=>m(`products.${S}.size`,Y),options:V.map(Y=>Y.size),placeholder:"Select size",error:(W=(I=(B=l.products)==null?void 0:B[S])==null?void 0:I.size)==null?void 0:W.message}),((ie=(se=l.products)==null?void 0:se[S])==null?void 0:ie.size)&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:(ue=(ce=l.products[S])==null?void 0:ce.size)==null?void 0:ue.message})]}),u.jsx(_e,{label:"Quantity",placeholder:"Enter quantity",...a(`products.${S}.quantity`),error:(b=(h=(le=l.products)==null?void 0:le[S])==null?void 0:h.quantity)==null?void 0:b.message}),u.jsxs("div",{children:[u.jsx("div",{className:"flex gap-2",children:u.jsx(We,{label:"Order By",value:g(`products.${S}.order_by`),onChange:Y=>m(`products.${S}.order_by`,Y),options:(Z==null?void 0:Z.order_by)||[],placeholder:"Select",error:(_=(p=(y=l.products)==null?void 0:y[S])==null?void 0:p.order_by)==null?void 0:_.message})}),((z=(M=l.products)==null?void 0:M[S])==null?void 0:z.order_by)&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:(q=(D=l.products[S])==null?void 0:D.order_by)==null?void 0:q.message})]})]},C.id)})})]}),u.jsx(he,{type:"submit",className:"w-full mt-4",children:"Save Order"})]})]})})},cn=()=>{const[t,e]=Be.useState(!1);return u.jsxs(u.Fragment,{children:[t&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:u.jsx(bs,{open:t,setOpen:e})}),!t&&u.jsx("div",{children:u.jsxs(he,{size:"lg",className:"rounded-full",onClick:()=>e(!0),children:[u.jsx(dr,{}),"New Order"]})})]})};function U(t){return Array.isArray?Array.isArray(t):Mt(t)==="[object Array]"}function ys(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function As(t){return t==null?"":ys(t)}function G(t){return typeof t=="string"}function wt(t){return typeof t=="number"}function Cs(t){return t===!0||t===!1||Es(t)&&Mt(t)=="[object Boolean]"}function St(t){return typeof t=="object"}function Es(t){return St(t)&&t!==null}function N(t){return t!=null}function Pe(t){return!t.trim().length}function Mt(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const _s="Incorrect 'index' type",ws=t=>`Invalid value for key ${t}`,Ss=t=>`Pattern length exceeds max of ${t}.`,Ms=t=>`Missing ${t} property in key`,Ps=t=>`Property 'weight' in key '${t}' must be a positive integer`,Ye=Object.prototype.hasOwnProperty;class Bs{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(n=>{let s=Pt(n);this._keys.push(s),this._keyMap[s.id]=s,r+=s.weight}),this._keys.forEach(n=>{n.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Pt(t){let e=null,r=null,n=null,s=1,o=null;if(G(t)||U(t))n=t,e=Ue(t),r=ze(t);else{if(!Ye.call(t,"name"))throw new Error(Ms("name"));const a=t.name;if(n=a,Ye.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(Ps(a));e=Ue(a),r=ze(a),o=t.getFn}return{path:e,id:r,weight:s,src:n,getFn:o}}function Ue(t){return U(t)?t:t.split(".")}function ze(t){return U(t)?t.join("."):t}function js(t,e){let r=[],n=!1;const s=(o,a,i)=>{if(N(o))if(!a[i])r.push(o);else{let d=a[i];const c=o[d];if(!N(c))return;if(i===a.length-1&&(G(c)||wt(c)||Cs(c)))r.push(As(c));else if(U(c)){n=!0;for(let l=0,g=c.length;l<g;l+=1)s(c[l],a,i+1)}else a.length&&s(c,a,i+1)}};return s(t,G(e)?e.split("."):e,0),n?r:r[0]}const Ds={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},zs={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Rs={location:0,threshold:.6,distance:100},Fs={useExtendedSearch:!1,getFn:js,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var x={...zs,...Ds,...Rs,...Fs};const ks=/[^ ]+/g;function Is(t=1,e=3){const r=new Map,n=Math.pow(10,e);return{get(s){const o=s.match(ks).length;if(r.has(o))return r.get(o);const a=1/Math.pow(o,.5*t),i=parseFloat(Math.round(a*n)/n);return r.set(o,i),i},clear(){r.clear()}}}class $e{constructor({getFn:e=x.getFn,fieldNormWeight:r=x.fieldNormWeight}={}){this.norm=Is(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,G(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();G(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!N(e)||Pe(e))return;let n={v:e,i:r,n:this.norm.get(e)};this.records.push(n)}_addObject(e,r){let n={i:r,$:{}};this.keys.forEach((s,o)=>{let a=s.getFn?s.getFn(e):this.getFn(e,s.path);if(N(a)){if(U(a)){let i=[];const d=[{nestedArrIndex:-1,value:a}];for(;d.length;){const{nestedArrIndex:c,value:l}=d.pop();if(N(l))if(G(l)&&!Pe(l)){let g={v:l,i:c,n:this.norm.get(l)};i.push(g)}else U(l)&&l.forEach((g,m)=>{d.push({nestedArrIndex:m,value:g})})}n.$[o]=i}else if(G(a)&&!Pe(a)){let i={v:a,n:this.norm.get(a)};n.$[o]=i}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Bt(t,e,{getFn:r=x.getFn,fieldNormWeight:n=x.fieldNormWeight}={}){const s=new $e({getFn:r,fieldNormWeight:n});return s.setKeys(t.map(Pt)),s.setSources(e),s.create(),s}function Ns(t,{getFn:e=x.getFn,fieldNormWeight:r=x.fieldNormWeight}={}){const{keys:n,records:s}=t,o=new $e({getFn:e,fieldNormWeight:r});return o.setKeys(n),o.setIndexRecords(s),o}function be(t,{errors:e=0,currentLocation:r=0,expectedLocation:n=0,distance:s=x.distance,ignoreLocation:o=x.ignoreLocation}={}){const a=e/t.length;if(o)return a;const i=Math.abs(n-r);return s?a+i/s:i?1:a}function Os(t=[],e=x.minMatchCharLength){let r=[],n=-1,s=-1,o=0;for(let a=t.length;o<a;o+=1){let i=t[o];i&&n===-1?n=o:!i&&n!==-1&&(s=o-1,s-n+1>=e&&r.push([n,s]),n=-1)}return t[o-1]&&o-n>=e&&r.push([n,o-1]),r}const ee=32;function Ks(t,e,r,{location:n=x.location,distance:s=x.distance,threshold:o=x.threshold,findAllMatches:a=x.findAllMatches,minMatchCharLength:i=x.minMatchCharLength,includeMatches:d=x.includeMatches,ignoreLocation:c=x.ignoreLocation}={}){if(e.length>ee)throw new Error(Ss(ee));const l=e.length,g=t.length,m=Math.max(0,Math.min(n,g));let v=o,A=m;const j=i>1||d,P=j?Array(g):[];let R;for(;(R=t.indexOf(e,A))>-1;){let E=be(e,{currentLocation:R,expectedLocation:m,distance:s,ignoreLocation:c});if(v=Math.min(E,v),A=R+l,j){let C=0;for(;C<l;)P[R+C]=1,C+=1}}A=-1;let F=[],$=1,k=l+g;const O=1<<l-1;for(let E=0;E<l;E+=1){let C=0,S=k;for(;C<S;)be(e,{errors:E,currentLocation:m+S,expectedLocation:m,distance:s,ignoreLocation:c})<=v?C=S:k=S,S=Math.floor((k-C)/2+C);k=S;let L=Math.max(1,m-S+1),V=a?g:Math.min(m+S,g)+l,K=Array(V+2);K[V+1]=(1<<E)-1;for(let B=V;B>=L;B-=1){let I=B-1,W=r[t.charAt(I)];if(j&&(P[I]=+!!W),K[B]=(K[B+1]<<1|1)&W,E&&(K[B]|=(F[B+1]|F[B])<<1|1|F[B+1]),K[B]&O&&($=be(e,{errors:E,currentLocation:I,expectedLocation:m,distance:s,ignoreLocation:c}),$<=v)){if(v=$,A=I,A<=m)break;L=Math.max(1,2*m-A)}}if(be(e,{errors:E+1,currentLocation:m,expectedLocation:m,distance:s,ignoreLocation:c})>v)break;F=K}const w={isMatch:A>=0,score:Math.max(.001,$)};if(j){const E=Os(P,i);E.length?d&&(w.indices=E):w.isMatch=!1}return w}function $s(t){let e={};for(let r=0,n=t.length;r<n;r+=1){const s=t.charAt(r);e[s]=(e[s]||0)|1<<n-r-1}return e}const ye=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class jt{constructor(e,{location:r=x.location,threshold:n=x.threshold,distance:s=x.distance,includeMatches:o=x.includeMatches,findAllMatches:a=x.findAllMatches,minMatchCharLength:i=x.minMatchCharLength,isCaseSensitive:d=x.isCaseSensitive,ignoreDiacritics:c=x.ignoreDiacritics,ignoreLocation:l=x.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:s,includeMatches:o,findAllMatches:a,minMatchCharLength:i,isCaseSensitive:d,ignoreDiacritics:c,ignoreLocation:l},e=d?e:e.toLowerCase(),e=c?ye(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const g=(v,A)=>{this.chunks.push({pattern:v,alphabet:$s(v),startIndex:A})},m=this.pattern.length;if(m>ee){let v=0;const A=m%ee,j=m-A;for(;v<j;)g(this.pattern.substr(v,ee),v),v+=ee;if(A){const P=m-ee;g(this.pattern.substr(P),P)}}else g(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,ignoreDiacritics:n,includeMatches:s}=this.options;if(e=r?e:e.toLowerCase(),e=n?ye(e):e,this.pattern===e){let j={isMatch:!0,score:0};return s&&(j.indices=[[0,e.length-1]]),j}const{location:o,distance:a,threshold:i,findAllMatches:d,minMatchCharLength:c,ignoreLocation:l}=this.options;let g=[],m=0,v=!1;this.chunks.forEach(({pattern:j,alphabet:P,startIndex:R})=>{const{isMatch:F,score:$,indices:k}=Ks(e,j,P,{location:o+R,distance:a,threshold:i,findAllMatches:d,minMatchCharLength:c,includeMatches:s,ignoreLocation:l});F&&(v=!0),m+=$,F&&k&&(g=[...g,...k])});let A={isMatch:v,score:v?m/this.chunks.length:1};return v&&s&&(A.indices=g),A}}class X{constructor(e){this.pattern=e}static isMultiMatch(e){return Je(e,this.multiRegex)}static isSingleMatch(e){return Je(e,this.singleRegex)}search(){}}function Je(t,e){const r=t.match(e);return r?r[1]:null}class Ts extends X{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Ls extends X{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Vs extends X{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Gs extends X{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Hs extends X{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Ws extends X{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Dt extends X{constructor(e,{location:r=x.location,threshold:n=x.threshold,distance:s=x.distance,includeMatches:o=x.includeMatches,findAllMatches:a=x.findAllMatches,minMatchCharLength:i=x.minMatchCharLength,isCaseSensitive:d=x.isCaseSensitive,ignoreDiacritics:c=x.ignoreDiacritics,ignoreLocation:l=x.ignoreLocation}={}){super(e),this._bitapSearch=new jt(e,{location:r,threshold:n,distance:s,includeMatches:o,findAllMatches:a,minMatchCharLength:i,isCaseSensitive:d,ignoreDiacritics:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class zt extends X{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,n;const s=[],o=this.pattern.length;for(;(n=e.indexOf(this.pattern,r))>-1;)r=n+o,s.push([n,r-1]);const a=!!s.length;return{isMatch:a,score:a?0:1,indices:s}}}const Re=[Ts,zt,Vs,Gs,Ws,Hs,Ls,Dt],Qe=Re.length,Ys=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Us="|";function Js(t,e={}){return t.split(Us).map(r=>{let n=r.trim().split(Ys).filter(o=>o&&!!o.trim()),s=[];for(let o=0,a=n.length;o<a;o+=1){const i=n[o];let d=!1,c=-1;for(;!d&&++c<Qe;){const l=Re[c];let g=l.isMultiMatch(i);g&&(s.push(new l(g,e)),d=!0)}if(!d)for(c=-1;++c<Qe;){const l=Re[c];let g=l.isSingleMatch(i);if(g){s.push(new l(g,e));break}}}return s})}const Qs=new Set([Dt.type,zt.type]);class Xs{constructor(e,{isCaseSensitive:r=x.isCaseSensitive,ignoreDiacritics:n=x.ignoreDiacritics,includeMatches:s=x.includeMatches,minMatchCharLength:o=x.minMatchCharLength,ignoreLocation:a=x.ignoreLocation,findAllMatches:i=x.findAllMatches,location:d=x.location,threshold:c=x.threshold,distance:l=x.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:n,includeMatches:s,minMatchCharLength:o,findAllMatches:i,ignoreLocation:a,location:d,threshold:c,distance:l},e=r?e:e.toLowerCase(),e=n?ye(e):e,this.pattern=e,this.query=Js(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:s,ignoreDiacritics:o}=this.options;e=s?e:e.toLowerCase(),e=o?ye(e):e;let a=0,i=[],d=0;for(let c=0,l=r.length;c<l;c+=1){const g=r[c];i.length=0,a=0;for(let m=0,v=g.length;m<v;m+=1){const A=g[m],{isMatch:j,indices:P,score:R}=A.search(e);if(j){if(a+=1,d+=R,n){const F=A.constructor.type;Qs.has(F)?i=[...i,...P]:i.push(P)}}else{d=0,a=0,i.length=0;break}}if(a){let m={isMatch:!0,score:d/a};return n&&(m.indices=i),m}}return{isMatch:!1,score:1}}}const Fe=[];function Zs(...t){Fe.push(...t)}function ke(t,e){for(let r=0,n=Fe.length;r<n;r+=1){let s=Fe[r];if(s.condition(t,e))return new s(t,e)}return new jt(t,e)}const Ae={AND:"$and",OR:"$or"},Ie={PATH:"$path",PATTERN:"$val"},Ne=t=>!!(t[Ae.AND]||t[Ae.OR]),qs=t=>!!t[Ie.PATH],en=t=>!U(t)&&St(t)&&!Ne(t),Xe=t=>({[Ae.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Rt(t,e,{auto:r=!0}={}){const n=s=>{let o=Object.keys(s);const a=qs(s);if(!a&&o.length>1&&!Ne(s))return n(Xe(s));if(en(s)){const d=a?s[Ie.PATH]:o[0],c=a?s[Ie.PATTERN]:s[d];if(!G(c))throw new Error(ws(d));const l={keyId:ze(d),pattern:c};return r&&(l.searcher=ke(c,e)),l}let i={children:[],operator:o[0]};return o.forEach(d=>{const c=s[d];U(c)&&c.forEach(l=>{i.children.push(n(l))})}),i};return Ne(t)||(t=Xe(t)),n(t)}function tn(t,{ignoreFieldNorm:e=x.ignoreFieldNorm}){t.forEach(r=>{let n=1;r.matches.forEach(({key:s,norm:o,score:a})=>{const i=s?s.weight:null;n*=Math.pow(a===0&&i?Number.EPSILON:a,(i||1)*(e?1:o))}),r.score=n})}function rn(t,e){const r=t.matches;e.matches=[],N(r)&&r.forEach(n=>{if(!N(n.indices)||!n.indices.length)return;const{indices:s,value:o}=n;let a={indices:s,value:o};n.key&&(a.key=n.key.src),n.idx>-1&&(a.refIndex=n.idx),e.matches.push(a)})}function sn(t,e){e.score=t.score}function nn(t,e,{includeMatches:r=x.includeMatches,includeScore:n=x.includeScore}={}){const s=[];return r&&s.push(rn),n&&s.push(sn),t.map(o=>{const{idx:a}=o,i={item:e[a],refIndex:a};return s.length&&s.forEach(d=>{d(o,i)}),i})}class xe{constructor(e,r={},n){this.options={...x,...r},this.options.useExtendedSearch,this._keyStore=new Bs(this.options.keys),this.setCollection(e,n)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof $e))throw new Error(_s);this._myIndex=r||Bt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){N(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let n=0,s=this._docs.length;n<s;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,s-=1,r.push(o))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:n,includeScore:s,shouldSort:o,sortFn:a,ignoreFieldNorm:i}=this.options;let d=G(e)?G(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return tn(d,{ignoreFieldNorm:i}),o&&d.sort(a),wt(r)&&r>-1&&(d=d.slice(0,r)),nn(d,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(e){const r=ke(e,this.options),{records:n}=this._myIndex,s=[];return n.forEach(({v:o,i:a,n:i})=>{if(!N(o))return;const{isMatch:d,score:c,indices:l}=r.searchIn(o);d&&s.push({item:o,idx:a,matches:[{score:c,value:o,norm:i,indices:l}]})}),s}_searchLogical(e){const r=Rt(e,this.options),n=(i,d,c)=>{if(!i.children){const{keyId:g,searcher:m}=i,v=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(d,g),searcher:m});return v&&v.length?[{idx:c,item:d,matches:v}]:[]}const l=[];for(let g=0,m=i.children.length;g<m;g+=1){const v=i.children[g],A=n(v,d,c);if(A.length)l.push(...A);else if(i.operator===Ae.AND)return[]}return l},s=this._myIndex.records,o={},a=[];return s.forEach(({$:i,i:d})=>{if(N(i)){let c=n(r,i,d);c.length&&(o[d]||(o[d]={idx:d,item:i,matches:[]},a.push(o[d])),c.forEach(({matches:l})=>{o[d].matches.push(...l)}))}}),a}_searchObjectList(e){const r=ke(e,this.options),{keys:n,records:s}=this._myIndex,o=[];return s.forEach(({$:a,i})=>{if(!N(a))return;let d=[];n.forEach((c,l)=>{d.push(...this._findMatches({key:c,value:a[l],searcher:r}))}),d.length&&o.push({idx:i,item:a,matches:d})}),o}_findMatches({key:e,value:r,searcher:n}){if(!N(r))return[];let s=[];if(U(r))r.forEach(({v:o,i:a,n:i})=>{if(!N(o))return;const{isMatch:d,score:c,indices:l}=n.searchIn(o);d&&s.push({score:c,key:e,value:o,idx:a,norm:i,indices:l})});else{const{v:o,n:a}=r,{isMatch:i,score:d,indices:c}=n.searchIn(o);i&&s.push({score:d,key:e,value:o,norm:a,indices:c})}return s}}xe.version="7.1.0";xe.createIndex=Bt;xe.parseIndex=Ns;xe.config=x;xe.parseQuery=Rt;Zs(Xs);export{cn as A,xe as F,vr as u};
